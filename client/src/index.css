@tailwind base;
@tailwind components;
@tailwind utilities;

/* Animation delay utilities */
@layer utilities {
  .animation-delay-200 {
    animation-delay: 200ms;
  }
  .animation-delay-400 {
    animation-delay: 400ms;
  }
  .animation-delay-600 {
    animation-delay: 600ms;
  }
}

/* LIGHT MODE - Feather Greys with Warm/Cool Tints */
:root {
  --button-outline: rgba(0,0,0, .10);
  --badge-outline: rgba(0,0,0, .05);

  /* Automatic computation of border around primary / danger buttons */
  --opaque-button-border-intensity: -8; /* In terms of percentages */

  /* Backgrounds applied on top of other backgrounds when hovered/active */
  --elevate-1: rgba(0,0,0, .03);
  --elevate-2: rgba(0,0,0, .08);

  /* WCAG AA Compliant Red-Focused Gradient Colors (4.5:1+ contrast on white) */
  --gradient-dark-red-hsl: 0 85% 38%;   /* Darkest red: Deep crimson */
  --gradient-start-hsl: 0 75% 45%;      /* Primary red: Vibrant red */
  --gradient-pink-hsl: 350 65% 50%;     /* Pink-red: Warm transition */  
  --gradient-magenta-hsl: 330 60% 52%;  /* Magenta-pink: Softer end */

  /* Fallback uses the primary red */
  --gradient-fallback: hsl(var(--gradient-start-hsl));

  /* Performance tier (set by JavaScript) */
  --performance-tier: 1; /* 1=low, 2=medium, 3=high */

  /* Shadow System - Adjustable intensities */
  --shadow-ambient-base: 0.04;
  --shadow-key-base: 0.06;
  --shadow-fill-base: 0.02;
  --shadow-intensity: 1; /* Contextual multiplier */

  /* Theme transition duration (0 by default, set during transitions) */
  --theme-transition-duration: 0ms;

  /* Feather greys - subtle warm tint for texture */
  --background: 20 8% 97%;

  --foreground: 240 4% 12%;

  --border: 20 6% 88%;

  --card: 0 0% 100%;

  --card-foreground: 240 4% 12%;

  --card-border: 20 4% 92%;

  --sidebar: 20 6% 96%;

  --sidebar-foreground: 240 4% 12%;

  --sidebar-border: 20 5% 90%;

  --sidebar-primary: 0 85% 42%;

  --sidebar-primary-foreground: 0 0% 100%;

  --sidebar-accent: 20 5% 91%;

  --sidebar-accent-foreground: 240 4% 12%;

  --sidebar-ring: 0 85% 42%;

  --popover: 20 6% 93%;

  --popover-foreground: 240 4% 12%;

  --popover-border: 20 5% 87%;

  /* Competition: Red - using darkest red from gradient */
  --primary: 0 85% 38%;

  --primary-foreground: 0 0% 100%;

  /* Community: Purple - RGB(88, 50, 175) */
  --community: 258 56% 44%;

  --community-foreground: 0 0% 100%;

  /* Community: Deep Indigo #2e294e */
  --indigo: 249 29% 24%;

  --indigo-foreground: 0 0% 98%;

  /* Community: Purple Dark #42349c */
  --purple-dark: 251 49% 40%;

  --purple-dark-foreground: 0 0% 98%;

  /* Warm grey secondary */
  --secondary: 20 6% 89%;

  --secondary-foreground: 240 4% 12%;

  /* Cool grey muted */
  --muted: 220 8% 87%;

  --muted-foreground: 240 3% 42%;

  /* Subtle purple-tinted accent */
  --accent: 250 15% 88%;

  --accent-foreground: 240 4% 12%;

  --destructive: 0 84% 60%;

  --destructive-foreground: 0 0% 98%;

  --input: 220 6% 65%;

  /* TipTap Editor Styles */
  --editor-border: 20 6% 88%;
  --editor-bg: 0 0% 100%;
  --ring: 0 85% 42%;

  /* Chart colors using brand palette */
  --chart-1: 0 100% 50%;        /* Competition red */
  --chart-2: 252 67% 53%;       /* Community purple */
  --chart-3: 249 29% 24%;       /* Indigo */
  --chart-4: 251 49% 40%;       /* Purple dark */
  --chart-5: 354 70% 55%;       /* Coral variation */

  /* ================================================
     TYPOGRAPHY SYSTEM - Global font definitions
     Future: Admin can control font families here
     ================================================ */
  --font-sans: Inter, system-ui, sans-serif;
  --font-serif: Georgia, serif;
  --font-mono: 'JetBrains Mono', monospace;

  /* Typography Scale - Future admin control */
  --font-size-h1: 2.5rem;      /* 40px */
  --font-size-h2: 2rem;        /* 32px */
  --font-size-h3: 1.5rem;      /* 24px */
  --font-size-h4: 1.25rem;     /* 20px */
  --font-size-base: 1rem;      /* 16px */
  --font-size-small: 0.875rem; /* 14px */

  /* ================================================
     COMPONENT-SPECIFIC COLOR VARIABLES
     Future: Admin can control component colors
     ================================================ */

  /* Calculator Colors - ROI Calculator accent colors */
  --calculator-accent: var(--community);           /* Purple for sliders and values */
  --calculator-accent-foreground: var(--community-foreground);
  --calculator-outline: var(--primary);            /* Red for borders and glow */
  --calculator-cta: var(--primary);                /* Red for CTA buttons */
  --calculator-cta-foreground: var(--primary-foreground);

  /* Widget Colors - Floating widgets and CTAs */
  --widget-primary: var(--primary);
  --widget-primary-foreground: var(--primary-foreground);

  /* ================================================
     STYLE GROUPING RULES - Pattern Documentation

     H1 Pattern (Default):
     - Line 1: Standard foreground color (black/white)
     - Line 2: Gradient text (.gradient-text class)
     - Exceptions: Hero section, Fullstack Sales Unit

     Button Pattern:
     - Primary: Red (--primary) for main CTAs
     - Secondary: Contextual colors for supporting actions
     - All buttons use hover-elevate and active-elevate-2

     Badge Pattern:
     - Community: Purple (--community)
     - Competition: Red (--primary)
     - Culture: Combined community + competition

     Future: These patterns can be configured via admin panel
     ================================================ */

  --radius: .5rem; /* 8px */
  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);
  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);
  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);
  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);
  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --tracking-normal: 0em;
  --spacing: 0.25rem;

  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */

  /* Fallback for older browsers */
  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --sidebar-accent-border: hsl(var(--sidebar-accent));
  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --primary-border: hsl(var(--primary));
  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --secondary-border: hsl(var(--secondary));
  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --muted-border: hsl(var(--muted));
  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --accent-border: hsl(var(--accent));
  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --destructive-border: hsl(var(--destructive));
  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Community color borders */
  --community-border: hsl(var(--community));
  --community-border: hsl(from hsl(var(--community)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  --indigo-border: hsl(var(--indigo));
  --indigo-border: hsl(from hsl(var(--indigo)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  --purple-dark-border: hsl(var(--purple-dark));
  --purple-dark-border: hsl(from hsl(var(--purple-dark)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
}

.dark {
  --button-outline: rgba(255,255,255, .10);
  --badge-outline: rgba(255,255,255, .05);

  --opaque-button-border-intensity: 9;  /* In terms of percentages */

  /* Backgrounds applied on top of other backgrounds when hovered/active */
  --elevate-1: rgba(255,255,255, .04);
  --elevate-2: rgba(255,255,255, .09);

  /* Dark Mode Warm Gradient - stays in red spectrum only */
  --gradient-dark-red: 0 85% 58%;        /* Pure red coral */
  --gradient-dark-crimson: 350 82% 60%;  /* Warm crimson */
  --gradient-dark-rose: 340 78% 58%;     /* Rose-red */
  --gradient-dark-pink: 330 70% 58%;     /* Warm pink (just a hint) */

  /* Dark backgrounds with subtle purple undertones */
  --background: 249 12% 6%;

  --foreground: 0 0% 98%;

  --border: 249 8% 16%;

  --card: 249 10% 11%;

  --card-foreground: 0 0% 98%;

  --card-border: 249 8% 15%;

  --sidebar: 249 12% 7%;

  --sidebar-foreground: 0 0% 98%;

  --sidebar-border: 249 10% 12%;

  --sidebar-primary: 0 85% 45%;

  --sidebar-primary-foreground: 0 0% 100%;

  --sidebar-accent: 249 8% 14%;

  --sidebar-accent-foreground: 0 0% 98%;

  --sidebar-ring: 0 85% 45%;

  --popover: 249 10% 13%;

  --popover-foreground: 0 0% 98%;

  --popover-border: 249 8% 17%;

  /* Competition: Accessible red for dark mode (4.5:1+ contrast) */
  --primary: 0 85% 45%;

  --primary-foreground: 0 0% 100%;

  /* Community: Purple - RGB(88, 50, 175) for dark mode */
  --community: 258 56% 44%;

  --community-foreground: 0 0% 100%;

  /* Community: Deep Indigo - good contrast maintained */
  --indigo: 249 40% 45%;

  --indigo-foreground: 0 0% 98%;

  /* Community: Purple Dark - darkened for accessibility */
  --purple-dark: 251 55% 45%;

  --purple-dark-foreground: 0 0% 98%;

  /* Purple-tinted secondary */
  --secondary: 249 8% 16%;

  --secondary-foreground: 0 0% 98%;

  /* Purple-tinted muted */
  --muted: 249 6% 15%;

  --muted-foreground: 0 0% 65%;

  /* Purple-tinted accent */
  --accent: 250 12% 18%;

  --accent-foreground: 0 0% 98%;

  --destructive: 0 84% 60%;

  --destructive-foreground: 0 0% 98%;

  --input: 249 6% 35%;
  --ring: 0 85% 45%;

  /* Dimensional Surfaces - 5-shade gray system for 3D depth */
  --surface-sunken: 249 10% 9%;      /* Recessed surfaces - between sidebar and card */
  --surface-elevated: 249 8% 20%;    /* Raised/highlighted surfaces */

  /* Light Trickle System - Control properties for dimensional gradients */
  --light-intensity: 4%;             /* How much lighter the lit areas are (2-6% recommended) */
  --light-angle: 135deg;             /* Default light direction (top-left to bottom-right) */

  /* Chart colors using brand palette - brighter for dark mode */
  --chart-1: 0 100% 55%;        /* Competition red */
  --chart-2: 252 67% 65%;       /* Community purple */
  --chart-3: 249 40% 45%;       /* Indigo */
  --chart-4: 251 55% 55%;       /* Purple dark */
  --chart-5: 354 75% 60%;       /* Coral variation */

  /* Calculator Colors - Dark mode variants */
  --calculator-accent: var(--community);           /* Purple for sliders and values */
  --calculator-accent-foreground: var(--community-foreground);
  --calculator-outline: var(--primary);            /* Red for borders and glow */
  --calculator-cta: var(--primary);                /* Red for CTA buttons */
  --calculator-cta-foreground: var(--primary-foreground);

  /* Widget Colors - Dark mode variants */
  --widget-primary: var(--primary);
  --widget-primary-foreground: var(--primary-foreground);

  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 100% / 0.00);
  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 100% / 0.00);
  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 100% / 0.00), 0px 1px 2px -1px hsl(0 0% 100% / 0.00);
  --shadow: 0px 2px 0px 0px hsl(0 0% 100% / 0.00), 0px 1px 2px -1px hsl(0 0% 100% / 0.00);
  --shadow-md: 0px 2px 0px 0px hsl(0 0% 100% / 0.00), 0px 2px 4px -1px hsl(0 0% 100% / 0.00);
  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 100% / 0.00), 0px 4px 6px -1px hsl(0 0% 100% / 0.00);
  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 100% / 0.00), 0px 8px 10px -1px hsl(0 0% 100% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 100% / 0.00);

  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */

  /* Fallback for older browsers */
  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --sidebar-accent-border: hsl(var(--sidebar-accent));
  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --primary-border: hsl(var(--primary));
  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --secondary-border: hsl(var(--secondary));
  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --muted-border: hsl(var(--muted));
  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --accent-border: hsl(var(--accent));
  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --destructive-border: hsl(var(--destructive));
  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Community color borders */
  --community-border: hsl(var(--community));
  --community-border: hsl(from hsl(var(--community)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  --indigo-border: hsl(var(--indigo));
  --indigo-border: hsl(from hsl(var(--indigo)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  --purple-dark-border: hsl(var(--purple-dark));
  --purple-dark-border: hsl(from hsl(var(--purple-dark)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
  }
}

/**
 * Using the elevate system.
 * Automatic contrast adjustment.
 *
 * <element className="hover-elevate" />
 * <element className="active-elevate-2" />
 *
 * // Using the tailwind utility when a data attribute is "on"
 * <element className="toggle-elevate data-[state=on]:toggle-elevated" />
 * // Or manually controlling the toggle state
 * <element className="toggle-elevate toggle-elevated" />
 *
 * Elevation systems have to handle many states.
 * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)
 * - toggled or not
 * - focused or not (this is not handled with these utilities)
 *
 * Even without handling focused or not, this is six possible combinations that
 * need to be distinguished from eachother visually.
 */
@layer utilities {

  /* Hide ugly search cancel button in Chrome until we can style it properly */
  input[type="search"]::-webkit-search-cancel-button {
    @apply hidden;
  }

  /* Placeholder styling for contentEditable div */
  [contenteditable][data-placeholder]:empty::before {
    content: attr(data-placeholder);
    color: hsl(var(--muted-foreground));
    pointer-events: none;
  }

  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of
   * buttons/badges can remove the automatic brightness adjustment on interactions
   * and program their own. */
  .no-default-hover-elevate {}

  .no-default-active-elevate {}


  /**
   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.
   * This way they can stack/compound. Both will overlap the parent's borders!
   * So borders will be automatically adjusted both on toggle, and hover/active,
   * and they will be compounded.
   */
  .toggle-elevate::before,
  .toggle-elevate-2::before {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    border-radius: inherit;
    z-index: -1;
  }

  .toggle-elevate.toggle-elevated::before {
    background-color: var(--elevate-2);
  }

  /* If there's a 1px border, adjust the inset so that it covers that parent's border */
  .border.toggle-elevate::before {
    inset: -1px;
  }

  /* Does not work on elements with overflow:hidden! */
  .hover-elevate:not(.no-default-hover-elevate),
  .active-elevate:not(.no-default-active-elevate),
  .hover-elevate-2:not(.no-default-hover-elevate),
  .active-elevate-2:not(.no-default-active-elevate) {
    position: relative;
    z-index: 0;
  }

  .hover-elevate:not(.no-default-hover-elevate)::after,
  .active-elevate:not(.no-default-active-elevate)::after,
  .hover-elevate-2:not(.no-default-hover-elevate)::after,
  .active-elevate-2:not(.no-default-active-elevate)::after {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    border-radius: inherit;
    z-index: 999;
  }

  .hover-elevate:hover:not(.no-default-hover-elevate)::after,
  .active-elevate:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-1);
  }

  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,
  .active-elevate-2:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-2);
  }

  /* If there's a 1px border, adjust the inset so that it covers that parent's border */
  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,
  .border.active-elevate:not(.no-active-interaction-elevate)::after,
  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,
  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,
  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {
    inset: -1px;
  }

  /* ================================================
     DIMENSIONAL LIGHTING SYSTEM - Light Trickle Gradients
     Creates subtle gradients that simulate light falling across 3D surfaces
     ================================================ */

  /* Light from top - like overhead lighting */
  .dark .light-trickle-top {
    background: linear-gradient(
      180deg,
      hsl(249 10% calc(11% + var(--light-intensity))) 0%,
      hsl(249 10% 11%) 100%
    );
  }

  /* Diagonal light - like sun through a window (top-left to bottom-right) */
  .dark .light-trickle-diagonal {
    background: linear-gradient(
      var(--light-angle),
      hsl(249 10% calc(11% + var(--light-intensity))) 0%,
      hsl(249 10% 11%) 50%,
      hsl(249 10% calc(11% - 1%)) 100%
    );
  }

  /* Radial spotlight - light from center fading to edges */
  .dark .light-trickle-radial {
    background: radial-gradient(
      ellipse at center,
      hsl(249 10% calc(11% + var(--light-intensity))) 0%,
      hsl(249 10% 11%) 70%
    );
  }

  /* Corner light - like ambient room lighting from top-left */
  .dark .light-trickle-corner {
    background: radial-gradient(
      ellipse at top left,
      hsl(249 10% calc(11% + var(--light-intensity))) 0%,
      hsl(249 10% 11%) 60%,
      hsl(249 10% calc(11% - 1%)) 100%
    );
  }

  /* Elevated surface - combines raised bg color with light from top */
  .dark .light-trickle-elevated {
    background: linear-gradient(
      180deg,
      hsl(249 8% calc(20% + 2%)) 0%,
      hsl(var(--surface-elevated)) 100%
    );
  }

  /* Bottom light - creates inset/recessed effect (light from below) */
  .dark .light-trickle-bottom {
    background: linear-gradient(
      0deg,
      hsl(249 10% calc(11% + var(--light-intensity))) 0%,
      hsl(249 10% 11%) 100%
    );
  }

  /* Depth utilities - use the new surface shades for layering */
  .dark .depth-sunken {
    background: hsl(var(--surface-sunken));
  }

  .dark .depth-elevated {
    background: hsl(var(--surface-elevated));
  }

  /* Depth with light trickle - combines depth and gradient */
  .dark .depth-sunken-lit {
    background: linear-gradient(
      var(--light-angle),
      hsl(249 10% calc(9% + var(--light-intensity))) 0%,
      hsl(var(--surface-sunken)) 100%
    );
  }

  .dark .depth-elevated-lit {
    background: linear-gradient(
      180deg,
      hsl(249 8% calc(20% + 2%)) 0%,
      hsl(var(--surface-elevated)) 100%
    );
  }

  /* ================================================
     GRADIENT TEXT SYSTEM - Progressive Enhancement
     ================================================ */

  /* Base gradient text class with fallback - LIGHT MODE - Crimson to Warm Grey */
  html:not(.dark) .gradient-text {
    /* Layer 0: Legacy browser fallback (outside @supports) */
    color: var(--gradient-fallback);
    font-weight: 600; /* Improve readability */

    /* Layer 1: Crimson to warm grey gradient for capable browsers */
    @supports (background-clip: text) or (-webkit-background-clip: text) {
      background: linear-gradient(180deg, hsl(348, 83%, 47%) 0%, hsl(0, 10%, 20%) 90%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      background-size: 100% 150%;
    }
  }

  /* Dark mode gradient - Crimson to Warm Grey */
  html.dark .gradient-text {
    /* Layer 0: Legacy browser fallback (outside @supports) */
    color: hsl(var(--primary));
    font-weight: 600;

    /* Layer 1: Crimson to warm grey gradient for capable browsers */
    @supports (background-clip: text) or (-webkit-background-clip: text) {
      background: linear-gradient(180deg, hsl(348, 83%, 47%) 0%, hsl(0, 10%, 20%) 90%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      background-size: 100% 150%;
    }
  }

  /* ================================================
     PURPLE/COMMUNITY GRADIENT - For calculator values
     ================================================ */

  /* Light mode crimson to warm grey gradient */
  html:not(.dark) .gradient-text-purple {
    color: hsl(var(--community));
    font-weight: 600;

    @supports (background-clip: text) or (-webkit-background-clip: text) {
      background: linear-gradient(180deg, hsl(348, 83%, 47%) 0%, hsl(0, 10%, 20%) 90%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      background-size: 100% 150%;
    }
  }

  /* Dark mode crimson to warm grey gradient */
  html.dark .gradient-text-purple {
    color: hsl(var(--community));
    font-weight: 600;

    @supports (background-clip: text) or (-webkit-background-clip: text) {
      background: linear-gradient(180deg, hsl(348, 83%, 47%) 0%, hsl(0, 10%, 20%) 90%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      background-size: 100% 150%;
    }
  }

  /* ================================================
     CALCULATOR SLIDER COLORS - Override to purple
     ================================================ */

  /* Target sliders within calculator cards */
  [data-testid="card-hero-roi"] [role="slider"],
  [data-testid="card-hero-roi"] [data-radix-collection-item] {
    border-color: hsl(var(--calculator-accent));
  }

  [data-testid="card-hero-roi"] [data-radix-slider-range] {
    background-color: hsl(var(--calculator-accent));
  }

/* Crimson to Royal Blue Gradient for Buttons */
.gradient-button-crimson-blue {
  background: linear-gradient(135deg, #DC143C 0%, #4169E1 100%);
  color: white;
  border: 1px solid rgba(220, 20, 60, 0.5);
}

  /* Context-aware gradient intensities - LIGHT MODE */
  html:not(.dark) .gradient-hero {
    background-image: linear-gradient(180deg, hsl(348, 83%, 47%) 0%, hsl(0, 10%, 20%) 90%);
    filter: saturate(1.2) brightness(1.05);
  }

  html:not(.dark) .gradient-card {
    filter: saturate(1);
  }

  html:not(.dark) .gradient-button {
    filter: saturate(0.95);
  }

  html:not(.dark) .gradient-subtle {
    filter: saturate(0.8) opacity(0.9);
  }

  /* Context-aware gradient intensities - DARK MODE */
  html.dark .gradient-hero {
    background-image: linear-gradient(180deg, hsl(348, 83%, 47%) 0%, hsl(0, 10%, 20%) 90%);
    filter: saturate(1.15) brightness(1.1);
  }

  html.dark .gradient-card {
    filter: saturate(1.05);
  }

  html.dark .gradient-button {
    filter: saturate(1);
  }

  html.dark .gradient-subtle {
    filter: saturate(0.85) opacity(0.95);
  }

  /* ================================================
     LIGHT MODE DEPTH SYSTEM - Multi-layer shadows
     ================================================ */

  .light-depth {
    box-shadow: 
      /* Fill light - inner subtle gradient */
      inset 0 1px 1px -1px hsla(0, 0%, 100%, calc(0.5 * var(--shadow-intensity))),
      /* Ambient shadow - soft overall */
      0 2px 4px -2px hsla(var(--foreground), calc(var(--shadow-ambient-base) * var(--shadow-intensity))),
      /* Key shadow - directional */
      0 4px 8px -4px hsla(var(--foreground), calc(var(--shadow-key-base) * var(--shadow-intensity))),
      /* Rim light - edge definition */
      0 0 0 1px hsla(var(--foreground), calc(0.02 * var(--shadow-intensity)));
  }

  /* Context-aware shadow intensities */
  .card { --shadow-intensity: 1; }
  .card:hover { --shadow-intensity: 1.5; }
  .modal { --shadow-intensity: 2; }
  .dropdown { --shadow-intensity: 1.2; }

  /* ================================================
     TECHNICAL GRID PATTERNS - Performance-tiered
     ================================================ */

  /* Base grid pattern - hidden by default */
  .light-grid-dots,
  .light-grid-iso {
    display: none;
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 0;
  }

  /* Tier 2+ - Show grid patterns */
  html.performance-tier-2 .light-grid-dots,
  html.performance-tier-3 .light-grid-dots {
    display: block;
    background-image: radial-gradient(
      circle at center,
      hsla(var(--foreground), 0.03) 1px,
      transparent 1px
    );
    background-size: 24px 24px;
    background-position: 0 0, 12px 12px;
  }

  html.performance-tier-2 .light-grid-iso,
  html.performance-tier-3 .light-grid-iso {
    display: block;
    background-image: 
      linear-gradient(30deg, hsla(var(--border), 0.3) 1px, transparent 1px),
      linear-gradient(-30deg, hsla(var(--border), 0.3) 1px, transparent 1px);
    background-size: 40px 69.28px; /* Perfect isometric ratio */
  }

  /* ================================================
     PRECISION GRADIENT MESH - Tier 3 only
     ================================================ */

  html.performance-tier-3 .light-gradient-mesh {
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: 
      radial-gradient(
        ellipse at 20% 30%,
        hsla(var(--gradient-start-hsl), 0.05) 0%,
        transparent 40%
      ),
      radial-gradient(
        ellipse at 60% 50%,
        hsla(var(--gradient-purple-hsl), 0.05) 0%,
        transparent 40%
      ),
      radial-gradient(
        ellipse at 90% 70%,
        hsla(var(--gradient-blue-hsl), 0.05) 0%,
        transparent 40%
      );
  }
}

/* Custom animations */
@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 20px rgba(239, 35, 60, 0.4);
  }
  50% {
    box-shadow: 0 0 40px rgba(239, 35, 60, 0.6);
  }
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

@keyframes slider-pulse-glow {
  0%, 100% {
    filter: drop-shadow(0 0 4px rgba(239, 35, 60, 0.5));
  }
  50% {
    filter: drop-shadow(0 0 8px rgba(239, 35, 60, 0.8));
  }
}

.slider-glow {
  animation: slider-pulse-glow 2s ease-in-out infinite;
}

/* Animated Gradient Mesh - CSS-based for better performance */

/* Primary gradient mesh layer */
.gradient-mesh-layer {
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(
      ellipse 800px 400px at 20% 30%,
      rgba(239, 35, 60, 0.35),
      transparent 50%
    ),
    radial-gradient(
      ellipse 600px 300px at 80% 70%,
      rgba(159, 143, 255, 0.35),
      transparent 50%
    ),
    radial-gradient(
      ellipse 700px 500px at 50% 50%,
      rgba(66, 52, 156, 0.25),
      transparent 60%
    );
  background-size: 200% 200%;
  mix-blend-mode: normal;
  pointer-events: none;
  will-change: transform, background-position;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Secondary gradient layer */
.gradient-mesh-layer-secondary {
  position: absolute;
  inset: 0;
  background: 
    linear-gradient(
      135deg,
      rgba(239, 35, 60, 0.25) 0%,
      transparent 30%,
      transparent 70%,
      rgba(159, 143, 255, 0.25) 100%
    );
  background-size: 300% 300%;
  mix-blend-mode: normal;
  pointer-events: none;
  will-change: transform, background-position;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Aurora overlay */
.gradient-mesh-aurora {
  position: absolute;
  inset: 0;
  opacity: 0.6;
  background: 
    radial-gradient(
      circle at 25% 25%,
      rgba(239, 35, 60, 0.15) 0%,
      transparent 60%
    ),
    radial-gradient(
      circle at 75% 75%,
      rgba(159, 143, 255, 0.15) 0%,
      transparent 60%
    );
  filter: blur(60px);
  mix-blend-mode: normal;
  pointer-events: none;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Animation keyframes */
@keyframes gradient-flow {
  0%, 100% {
    background-position: 0% 50%;
    transform: translate(0, 0) scale(1);
  }
  33% {
    background-position: 100% 50%;
    transform: translate(1%, -1%) scale(1.02);
  }
  66% {
    background-position: 50% 100%;
    transform: translate(-1%, 1%) scale(0.98);
  }
}

@keyframes gradient-shift {
  0%, 100% {
    background-position: 0% 0%;
  }
  50% {
    background-position: 100% 100%;
  }
}

/* Speed variants */
.gradient-mesh-slow {
  animation: gradient-flow 45s ease-in-out infinite;
}

.gradient-mesh-medium {
  animation: gradient-flow 30s ease-in-out infinite;
}

.gradient-mesh-fast {
  animation: gradient-flow 20s ease-in-out infinite;
}

.gradient-mesh-slow-secondary {
  animation: gradient-shift 40s ease-in-out infinite;
}

.gradient-mesh-medium-secondary {
  animation: gradient-shift 25s ease-in-out infinite;
}

.gradient-mesh-fast-secondary {
  animation: gradient-shift 15s ease-in-out infinite;
}

/* Aurora-style gradient animation */
@keyframes aurora-flow {
  0% {
    opacity: 0.3;
    transform: translateY(0) translateX(0) scale(1);
  }
  33% {
    opacity: 0.6;
    transform: translateY(-20px) translateX(10px) scale(1.05);
  }
  66% {
    opacity: 0.4;
    transform: translateY(10px) translateX(-15px) scale(0.95);
  }
  100% {
    opacity: 0.3;
    transform: translateY(0) translateX(0) scale(1);
  }
}

.animate-aurora {
  animation: aurora-flow 20s ease-in-out infinite;
}

/* Mesh gradient layers with GPU acceleration */
.gradient-mesh-layer {
  position: absolute;
  inset: 0;
  mix-blend-mode: normal;
  pointer-events: none;
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Performance optimization for gradient animations */
.gradient-mesh-container {
  position: relative;
  overflow: hidden;
  transform: translateZ(0);
  will-change: transform;
}

/* Pulse glow animation for orbital badges */
@keyframes pulse-glow {
  0%, 100% { 
    opacity: 1;
    filter: brightness(1);
  }
  50% { 
    opacity: 0.9;
    filter: brightness(1.2);
  }
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

/* Badge Texture - Aggressive Crimson to Warm Grey Gradient */
.badge-texture {
  position: relative;
  background-image: linear-gradient(180deg, hsl(348, 83%, 47%) 0%, hsl(0, 10%, 20%) 90%);
  background-repeat: no-repeat;
  box-shadow: 
    inset 0 1px 2px rgba(0, 0, 0, 0.08),
    inset 0 -1px 1px rgba(255, 255, 255, 0.1),
    0 1px 2px rgba(0, 0, 0, 0.05);
  filter: contrast(1.02) brightness(0.98);
}

.badge-texture::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.08'/%3E%3C/svg%3E");
  pointer-events: none;
  mix-blend-mode: overlay;
}

/* GTM System Glow Animation - Fade in and pulse red glow */
@keyframes gtm-glow {
  0% {
    opacity: 0;
    text-shadow: 0 0 10px rgba(212, 17, 17, 0);
  }
  50% {
    opacity: 1;
    text-shadow: 
      0 0 20px rgba(212, 17, 17, 0.6),
      0 0 30px rgba(212, 17, 17, 0.4),
      0 0 40px rgba(212, 17, 17, 0.3);
  }
  100% {
    opacity: 1;
    text-shadow: 
      0 0 15px rgba(212, 17, 17, 0.5),
      0 0 25px rgba(212, 17, 17, 0.3),
      0 0 35px rgba(212, 17, 17, 0.2);
  }
}

.gtm-system-glow {
  animation: gtm-glow 2s ease-in-out forwards;
  animation-delay: 0.5s;
  opacity: 0;
}

/* Animated Border Glow for Revenue Party Pod Card */
@keyframes border-glow-rotate {
  0% {
    background-position: 0% 0%;
  }
  100% {
    background-position: 200% 200%;
  }
}

.animated-border-glow {
  position: relative;
  overflow: visible;
}

.animated-border-glow::before {
  content: '';
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  padding: 2px;
  background: linear-gradient(
    90deg,
    rgba(212, 17, 17, 0.8) 0%,
    rgba(212, 17, 17, 0.4) 25%,
    rgba(212, 17, 17, 0) 50%,
    rgba(212, 17, 17, 0.4) 75%,
    rgba(212, 17, 17, 0.8) 100%
  );
  background-size: 200% 200%;
  animation: border-glow-rotate 3s linear infinite;
  -webkit-mask: 
    linear-gradient(#fff 0 0) content-box, 
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  filter: drop-shadow(0 0 10px rgba(212, 17, 17, 0.5));
}

/* Gentle CTA pulse animation */
@keyframes gentle-cta-pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.02);
  }
}

.animate-gentle-pulse {
  animation: gentle-cta-pulse 2s ease-in-out infinite;
}

.animate-gentle-pulse:hover {
  animation-play-state: paused;
}

/* Subtle bounce animation for floating widget first appearance */
@keyframes subtle-bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-8px);
  }
}

.animate-subtle-bounce {
  animation: subtle-bounce 0.4s ease-in-out 3;
}

/* ================================================
   LIGHT MODE ENHANCEMENTS - Watercolor Editorial
   ================================================ */

/* 1. Paper Texture Overlay - Subtle tactile foundation (light mode only) */
html:not(.dark) body {
  position: relative;
}

html:not(.dark) body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='paperNoise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='5' seed='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23paperNoise)' opacity='0.025'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 0;
  mix-blend-mode: multiply;
}

/* 2. Watercolor Gradients - Soft bleeds for semantic colors */

/* Subtle watercolor animation */
@keyframes watercolor-drift {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

/* Apply watercolor to badge variants */
html:not(.dark) .badge-texture[class*="bg-primary"] {
  background: linear-gradient(
    135deg,
    hsl(0 85% 42%) 0%,
    hsl(0 75% 48%) 30%,
    hsl(0 85% 42%) 60%,
    hsl(0 70% 52%) 100%
  ) !important;
  background-size: 200% 200%;
  animation: watercolor-drift 15s ease-in-out infinite;
}

html:not(.dark) .badge-texture[class*="bg-community"] {
  background: linear-gradient(
    135deg,
    hsl(252 67% 40%) 0%,
    hsl(252 60% 48%) 30%,
    hsl(252 67% 40%) 60%,
    hsl(252 55% 52%) 100%
  ) !important;
  background-size: 200% 200%;
  animation: watercolor-drift 15s ease-in-out infinite;
}

html:not(.dark) .badge-texture[class*="bg-indigo"] {
  background: linear-gradient(
    135deg,
    hsl(249 29% 24%) 0%,
    hsl(249 25% 32%) 30%,
    hsl(249 29% 24%) 60%,
    hsl(249 20% 36%) 100%
  ) !important;
  background-size: 200% 200%;
  animation: watercolor-drift 15s ease-in-out infinite;
}

html:not(.dark) .badge-texture[class*="bg-purple-dark"] {
  background: linear-gradient(
    135deg,
    hsl(251 49% 40%) 0%,
    hsl(251 45% 46%) 30%,
    hsl(251 49% 40%) 60%,
    hsl(251 42% 50%) 100%
  ) !important;
  background-size: 200% 200%;
  animation: watercolor-drift 15s ease-in-out infinite;
}

html:not(.dark) .badge-texture[class*="bg-destructive"] {
  background: linear-gradient(
    135deg,
    hsl(0 84% 60%) 0%,
    hsl(0 78% 65%) 30%,
    hsl(0 84% 60%) 60%,
    hsl(0 76% 68%) 100%
  ) !important;
  background-size: 200% 200%;
  animation: watercolor-drift 15s ease-in-out infinite;
}

/* Apply soft watercolor to cards with subtle animation */
html:not(.dark) .shadcn-card {
  background: linear-gradient(
    135deg,
    hsl(0 0% 100%) 0%,
    hsl(20 15% 99%) 30%,
    hsl(0 0% 100%) 60%,
    hsl(30 20% 98%) 100%
  ) !important;
  background-size: 200% 200%;
  animation: watercolor-drift 20s ease-in-out infinite;
}

/* 3. Prismatic Glass Effects - Rainbow shadow halos (light mode only) */
html:not(.dark) .shadcn-card {
  box-shadow: 
    0 1px 3px rgba(0, 0, 0, 0.08),
    0 0 0 1px rgba(0, 0, 0, 0.02),
    /* Prismatic chromatic aberration */
    0.5px 0.5px 0 rgba(255, 0, 0, 0.03),
    -0.5px 0.5px 0 rgba(0, 255, 0, 0.02),
    0 1px 0 rgba(0, 0, 255, 0.03),
    /* Subtle rainbow halo */
    0 4px 12px rgba(138, 43, 226, 0.02),
    0 2px 6px rgba(75, 0, 130, 0.02);
  position: relative;
}

html:not(.dark) .shadcn-card::after {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  background: linear-gradient(
    135deg,
    rgba(255, 0, 0, 0.04) 0%,
    rgba(255, 127, 0, 0.03) 16%,
    rgba(255, 255, 0, 0.025) 33%,
    rgba(0, 255, 0, 0.03) 50%,
    rgba(0, 0, 255, 0.04) 66%,
    rgba(75, 0, 130, 0.035) 83%,
    rgba(148, 0, 211, 0.04) 100%
  );
  opacity: 0;
  transition: opacity 0.4s ease;
  pointer-events: none;
  z-index: -1;
}

html:not(.dark) .shadcn-card:hover::after {
  opacity: 1;
}

/* Prismatic button effects - target actual button elements only */
html:not(.dark) button.inline-flex.items-center.justify-center,
html:not(.dark) a.inline-flex.items-center.justify-center[role="button"] {
  box-shadow: 
    0 1px 2px rgba(0, 0, 0, 0.05),
    0.5px 0.5px 0 rgba(255, 0, 255, 0.04),
    -0.5px 0.5px 0 rgba(0, 255, 255, 0.03);
}

/* 4. Vintage Stamp Badges (light mode only) */
html:not(.dark) .badge-texture {
  background-image: linear-gradient(21deg, hsl(348, 83%, 47%) 0%, hsl(0, 80%, 28%) 90%);
  background-repeat: no-repeat;

  /* Worn ink effect - enhanced shadows */
  box-shadow: 
    inset 0 1px 3px rgba(0, 0, 0, 0.14),
    inset 0 -1px 2px rgba(255, 255, 255, 0.18),
    0 2px 5px rgba(0, 0, 0, 0.10),
    /* Vintage stamp shadow */
    1px 2px 0 rgba(0, 0, 0, 0.04);

  filter: contrast(1.06) brightness(0.96) saturate(1.12);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

html:not(.dark) .badge-texture:hover {
  transform: translateY(-2px);
  box-shadow: 
    inset 0 1px 3px rgba(0, 0, 0, 0.14),
    inset 0 -1px 2px rgba(255, 255, 255, 0.18),
    0 6px 12px rgba(0, 0, 0, 0.14),
    1px 4px 0 rgba(0, 0, 0, 0.05);
}

html:not(.dark) .badge-texture::before {
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='stampNoise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='3' seed='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23stampNoise)' opacity='0.12'/%3E%3C/svg%3E");
  opacity: 1;
  mix-blend-mode: multiply;
}

/* 5. Sun Rays Animation (light mode only) */
@keyframes sun-ray-drift {
  0% {
    transform: translateX(-100%) translateY(-20%) rotate(-15deg);
    opacity: 0;
  }
  15% {
    opacity: 0.15;
  }
  85% {
    opacity: 0.15;
  }
  100% {
    transform: translateX(200%) translateY(20%) rotate(-15deg);
    opacity: 0;
  }
}

@keyframes sun-ray-drift-alt {
  0% {
    transform: translateX(-120%) translateY(10%) rotate(-18deg);
    opacity: 0;
  }
  15% {
    opacity: 0.12;
  }
  85% {
    opacity: 0.12;
  }
  100% {
    transform: translateX(180%) translateY(-10%) rotate(-18deg);
    opacity: 0;
  }
}

html:not(.dark) .sun-rays-container {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
  z-index: 1;
}

/* Hide sun rays in dark mode */
html.dark .sun-rays-container {
  display: none;
}

html:not(.dark) .sun-ray {
  position: absolute;
  width: 120%;
  height: 400%;
  top: -150%;
  left: -10%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 248, 220, 0.10) 45%,
    rgba(255, 250, 230, 0.18) 50%,
    rgba(255, 248, 220, 0.10) 55%,
    transparent 100%
  );
  animation: sun-ray-drift 40s ease-in-out infinite;
  transform-origin: center center;
  filter: blur(40px);
}

html:not(.dark) .sun-ray:nth-child(1) {
  animation-delay: 0s;
  width: 100%;
}

html:not(.dark) .sun-ray:nth-child(2) {
  animation: sun-ray-drift-alt 35s ease-in-out infinite;
  animation-delay: -12s;
  width: 110%;
  filter: blur(50px);
  opacity: 0.9;
}

html:not(.dark) .sun-ray:nth-child(3) {
  animation-delay: -25s;
  width: 90%;
  filter: blur(35px);
  opacity: 0.85;
}

/* Flip & Burn Animation Keyframes */
@keyframes burnGlow {
  0% {
    opacity: 0;
    background-position: -100% 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    background-position: 100% 0;
  }
}

@keyframes goldenShimmer {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

@keyframes crownDraw {
  to {
    stroke-dashoffset: 0;
    opacity: 1;
  }
}

/* ================================================
   ACCESSIBILITY OVERRIDES
   ================================================ */

/* High contrast mode */
@media (prefers-contrast: high) {
  .gradient-text {
    background: none !important;
    -webkit-text-fill-color: unset !important;
    color: hsl(var(--primary)) !important;
  }

  :root {
    --shadow-ambient-base: 0.08;
    --shadow-key-base: 0.12;
    --border: 220 6% 65%; /* Stronger borders */
  }
}

/* More contrast preference */
@media (prefers-contrast: more) {
  :root {
    --shadow-ambient-base: 0.08;
    --shadow-key-base: 0.12;
    --shadow-fill-base: 0.04;
  }

  .light-depth {
    border: 1px solid hsla(var(--foreground), 0.15);
  }
}

/* Forced colors mode (Windows high contrast) */
@media (forced-colors: active) {
  .gradient-text {
    forced-color-adjust: none;
    color: LinkText;
  }

  .light-depth {
    box-shadow: none !important;
    border: 1px solid ButtonText;
  }
}

/* Respect user's preference for reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Disable gradient mesh animations */
  .gradient-mesh-slow,
  .gradient-mesh-medium,
  .gradient-mesh-fast,
  .gradient-mesh-slow-secondary,
  .gradient-mesh-medium-secondary,
  .gradient-mesh-fast-secondary {
    animation: none !important;
  }

  /* Show static gradients instead */
  .gradient-mesh-layer,
  .gradient-mesh-layer-secondary {
    background-position: 50% 50% !important;
    transform: none !important;
  }

  /* Disable gentle pulse animation */
  .animate-gentle-pulse {
    animation: none !important;
  }

  /* Disable sun rays */
  html:not(.dark) .sun-ray {
    animation: none !important;
    opacity: 0 !important;
  }

  /* Disable watercolor animation */
  html:not(.dark) .badge-texture,
  html:not(.dark) .shadcn-card {
    animation: none !important;
  }

  /* Disable gradient animations */
  .gradient-text {
    animation: none !important;
  }
}

/* ================================================
   GRADIENT-AWARE BUTTON INTERACTIONS
   ================================================ */

/* Button with gradient text special handling */
.btn-gradient-text {
  position: relative;
  overflow: hidden;
}

.btn-gradient-text .gradient-text {
  transition: filter 0.2s ease;
}

/* Only apply filter effects to priority buttons */
.btn-gradient-text[data-priority="high"] .gradient-text:hover {
  filter: brightness(1.1) saturate(1.1);
}

.btn-gradient-text[data-priority="high"] .gradient-text:active {
  filter: brightness(0.95);
}

/* For list items, use opacity for better performance */
.gradient-list-item:hover .gradient-text {
  opacity: 0.9;
}

/* Focus state with gradient-aware outline */
.btn-gradient-text:focus-visible {
  outline: 2px solid hsl(var(--gradient-purple-hsl));
  outline-offset: 2px;
}

/* Disabled state */
.btn-gradient-text:disabled .gradient-text {
  filter: saturate(0.3) opacity(0.5);
}

/* ================================================
   THEME TRANSITION SYSTEM - Scoped selectors
   ================================================ */

/* Scoped transition selectors for better performance */
body, 
header, 
main, 
footer, 
nav,
.card, 
.btn, 
.sidebar,
.badge,
.input,
[data-theme-aware] {
  transition: 
    background-color var(--theme-transition-duration) ease-out,
    border-color var(--theme-transition-duration) ease-out,
    color var(--theme-transition-duration) ease-out,
    box-shadow var(--theme-transition-duration) ease-out,
    fill var(--theme-transition-duration) ease-out,
    stroke var(--theme-transition-duration) ease-out;
}

.theme-transitioning {
  --theme-transition-duration: 400ms;
}

/* ================================================
   MICRO-ANIMATIONS SUITE - Performance-tiered
   ================================================ */

/* Gradient text reveal on scroll */
@keyframes gradient-reveal {
  from {
    background-size: 0% 100%;
    color: var(--foreground);
  }
  to {
    background-size: 200% 100%;
    color: transparent;
  }
}

/* Data shimmer for numbers */
@keyframes data-shimmer {
  0% { 
    background-position: -200% center;
  }
  100% { 
    background-position: 200% center;
  }
}

/* Light scanning effect for progress bars */
@keyframes light-scan {
  0% {
    box-shadow: inset 0 0 0 0 hsla(var(--primary), 0.2);
  }
  50% {
    box-shadow: inset 100px 0 20px -20px hsla(var(--primary), 0.2);
  }
  100% {
    box-shadow: inset 200px 0 0 0 hsla(var(--primary), 0.2);
  }
}

/* Apply animations to tier 2+ only */
html.performance-tier-2 .animate-gradient-reveal,
html.performance-tier-3 .animate-gradient-reveal {
  animation: gradient-reveal 1s ease-out forwards;
}

html.performance-tier-2 .animate-data-shimmer,
html.performance-tier-3 .animate-data-shimmer {
  animation: data-shimmer 2s linear infinite;
}

html.performance-tier-3 .animate-light-scan {
  animation: light-scan 2s ease-out forwards;
}

/* ================================================
   TIPTAPEDITOR STYLES
   ================================================ */

.prose-editor .ProseMirror {
  outline: none;
  min-height: 400px;
  padding: 1rem;
}

.prose-editor .ProseMirror p.is-editor-empty:first-child::before {
  color: hsl(var(--muted-foreground));
  content: attr(data-placeholder);
  float: left;
  height: 0;
  pointer-events: none;
}

.prose-editor .ProseMirror h1 {
  font-size: 2em;
  font-weight: 700;
  margin-top: 0.67em;
  margin-bottom: 0.67em;
}

.prose-editor .ProseMirror h2 {
  font-size: 1.5em;
  font-weight: 600;
  margin-top: 0.75em;
  margin-bottom: 0.75em;
}

.prose-editor .ProseMirror h3 {
  font-size: 1.25em;
  font-weight: 600;
  margin-top: 0.83em;
  margin-bottom: 0.83em;
}

.prose-editor .ProseMirror h4 {
  font-size: 1.1em;
  font-weight: 600;
  margin-top: 1em;
  margin-bottom: 1em;
}

.prose-editor .ProseMirror h5 {
  font-size: 1em;
  font-weight: 600;
  margin-top: 1.17em;
  margin-bottom: 1.17em;
}

.prose-editor .ProseMirror h6 {
  font-size: 0.875em;
  font-weight: 600;
  margin-top: 1.33em;
  margin-bottom: 1.33em;
}

.prose-editor .ProseMirror img {
  max-width: 100%;
  height: auto;
  border-radius: 0.375rem;
  margin: 1rem 0;
}

.prose-editor .ProseMirror ul,
.prose-editor .ProseMirror ol {
  padding-left: 1.5rem;
  margin: 0.75rem 0;
}

.prose-editor .ProseMirror blockquote {
  border-left: 3px solid hsl(var(--border));
  padding-left: 1rem;
  margin: 1rem 0;
  color: hsl(var(--muted-foreground));
}

.prose-editor .ProseMirror code {
  background-color: hsl(var(--muted));
  padding: 0.125rem 0.25rem;
  border-radius: 0.25rem;
  font-size: 0.875em;
  font-family: monospace;
}

.prose-editor .ProseMirror a {
  color: hsl(var(--primary));
  text-decoration: underline;
  cursor: pointer;
}

.prose-editor .ProseMirror a:hover {
  text-decoration: none;
}

.prose-editor .ProseMirror iframe {
  border-radius: 0.375rem;
  margin: 1rem 0;
}

.prose-editor .ProseMirror table {
  border-collapse: collapse;
  table-layout: auto;
  width: 100%;
  margin: 1rem 0;
  overflow: hidden;
}

.prose-editor .ProseMirror th,
.prose-editor .ProseMirror td {
  border: 1px solid hsl(var(--border));
  padding: 0.5rem;
  position: relative;
  vertical-align: top;
  box-sizing: border-box;
  min-width: 1em;
}

.prose-editor .ProseMirror th {
  background-color: hsl(var(--muted) / 0.5);
  font-weight: 600;
  text-align: left;
}

.prose-editor .ProseMirror .selectedCell {
  background-color: hsl(var(--accent));
}

.prose-editor .ProseMirror .column-resize-handle {
  position: absolute;
  right: -2px;
  top: 0;
  bottom: 0;
  width: 4px;
  background-color: hsl(var(--primary));
  pointer-events: none;
}